<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HR Test Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .sidebar {
            background-color: #1a1a1a;
            color: #ffffff;
            height: 100vh;
            width: 250px;
            position: fixed;
            top: 0;
            left: 0;
            padding-top: 20px;
        }
        .sidebar a {
            padding: 15px 20px;
            display: block;
            color: #ffffff;
            text-decoration: none;
        }
        .sidebar a:hover {
            background-color: #333333;
        }
        .content {
            margin-left: 250px;
            padding: 20px;
            background-color: #f5f5f5;
            min-height: 100vh;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }
        .modal-content {
            background-color: #ffffff;
            margin: 10% auto;
            padding: 20px;
            width: 80%;
            max-width: 600px;
            border-radius: 8px;
            position: relative;
        }
        .close-btn {
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            color: #1a1a1a;
        }
        .multiselect {
            position: relative;
        }
        .multiselect-options {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background-color: #ffffff;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 10;
        }
        .multiselect-options label {
            display: block;
            padding: 8px;
            color: #1a1a1a;
        }
        .multiselect-options label:hover {
            background-color: #f5f5f5;
        }
        .question-item {
            border-bottom: 1px solid #d1d5db;
            padding: 10px 0;
        }
        .question-item:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="flex items-center px-4 py-3">
            <svg class="w-8 h-8 mr-2" viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <path d="M2 12h20"/>
                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10"/>
                <path d="M12 2a15.3 15.3 0 0 0-4 10 15.3 15.3 0 0 0 4 10"/>
            </svg>
            <h1 class="text-xl font-bold">POSSPOLÉ</h1>
        </div>
        <a href="#" class="mt-4">Dashboard</a>
        <a href="#" class="bg-[#6b7280] text-[#1a1a1a]">Test</a>
        <a href="#">TestUser</a>
        <a href="#">Report Analysis</a>
        <a href="#" class="mt-auto">Settings</a>
    </div>

    <!-- Main Content -->
    <div class="content">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-semibold text-[#1a1a1a]">Tests</h2>
            <button id="add-test-btn" class="bg-[#6b7280] text-[#1a1a1a] px-4 py-2 rounded-lg hover:bg-[#4b5563]">
                Add New Test
            </button>
        </div>

        <!-- Filters Section -->
        <div class="bg-white p-4 rounded-lg shadow mb-6">
            <h3 class="text-lg font-semibold mb-4 text-[#1a1a1a]">Filters</h3>
            <div class="flex flex-wrap gap-4">
                <!-- Date Range Filter -->
                <div>
                    <label class="block text-sm font-medium mb-1 text-[#1a1a1a]">Date Range</label>
                    <div class="flex gap-2">
                        <input type="date" id="start-date" class="p-2 border border-[#d1d5db] rounded text-[#1a1a1a]">
                        <span class="text-[#1a1a1a]">to</span>
                        <input type="date" id="end-date" class="p-2 border border-[#d1d5db] rounded text-[#1a1a1a]">
                    </div>
                </div>

                <!-- Role Filter -->
                <div>
                    <label class="block text-sm font-medium mb-1 text-[#1a1a1a]">Role</label>
                    <div class="multiselect">
                        <div id="role-select" class="p-2 border border-[#d1d5db] rounded cursor-pointer text-[#1a1a1a]">
                            Select Roles
                        </div>
                        <div id="role-options" class="multiselect-options">
                            <label><input type="checkbox" value="Digital Marketing" class="mr-2">Digital Marketing</label>
                            <label><input type="checkbox" value="SDE" class="mr-2">SDE</label>
                            <label><input type="checkbox" value="Business Analyst" class="mr-2">Business Analyst</label>
                            <label><input type="checkbox" value="Data Analyst" class="mr-2">Data Analyst</label>
                            <label><input type="checkbox" value="Solution Engineer" class="mr-2">Solution Engineer</label>
                        </div>
                    </div>
                </div>

                <!-- Clear Filters Button -->
                <button id="clear-filters" class="bg-[#d1d5db] text-[#1a1a1a] px-4 py-2 rounded-lg hover:bg-[#9ca3af]">
                    Clear Filters
                </button>
            </div>
        </div>

        <!-- Tests Table -->
        <div class="bg-white p-4 rounded-lg shadow">
            <table class="w-full text-left">
                <thead>
                    <tr class="border-b border-[#d1d5db]">
                        <th class="p-3 text-[#1a1a1a]">Test Name</th>
                        <th class="p-3 text-[#1a1a1a]">Role</th>
                        <th class="p-3 text-[#1a1a1a]">Date Added</th>
                        <th class="p-3 text-[#1a1a1a]">Actions</th>
                    </tr>
                </thead>
                <tbody id="tests-table-body">
                    <!-- Tests will be dynamically added here -->
                </tbody>
            </table>
        </div>

        <!-- Add Test Modal -->
        <div id="add-test-modal" class="modal">
            <div class="modal-content">
                <span class="close-btn">×</span>
                <h3 class="text-xl font-semibold mb-4 text-[#1a1a1a]">Add New Test</h3>
                <form id="add-test-form">
                    <div class="mb-4">
                        <label for="test-name" class="block text-sm font-medium text-[#1a1a1a]">Test Name</label>
                        <input type="text" id="test-name" class="w-full p-2 border border-[#d1d5db] rounded text-[#1a1a1a]" required>
                    </div>
                    <div class="mb-4">
                        <label for="test-role" class="block text-sm font-medium text-[#1a1a1a]">Role</label>
                        <select id="test-role" class="w-full p-2 border border-[#d1d5db] rounded text-[#1a1a1a]" required>
                            <option value="Digital Marketing">Digital Marketing</option>
                            <option value="SDE">SDE</option>
                            <option value="Business Analyst">Business Analyst</option>
                            <option value="Data Analyst">Data Analyst</option>
                            <option value="Solution Engineer">Solution Engineer</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label for="test-duration" class="block text-sm font-medium text-[#1a1a1a]">Duration (minutes)</label>
                        <input type="number" id="test-duration" class="w-full p-2 border border-[#d1d5db] rounded text-[#1a1a1a]" required>
                    </div>
                    <button type="submit" class="bg-[#6b7280] text-[#1a1a1a] px-4 py-2 rounded-lg hover:bg-[#4b5563]">
                        Add Test
                    </button>
                </form>
            </div>
        </div>

        <!-- Test Details Modal -->
        <div id="test-details-modal" class="modal">
            <div class="modal-content">
                <span class="close-btn">×</span>
                <h3 class="text-xl font-semibold mb-4 text-[#1a1a1a]">Test Details</h3>
                <div id="test-details-content">
                    <p class="text-[#1a1a1a]"><strong>Test Name:</strong> <span id="details-test-name"></span></p>
                    <p class="text-[#1a1a1a]"><strong>Role:</strong> <span id="details-role"></span></p>
                    <p class="text-[#1a1a1a]"><strong>Date Added:</strong> <span id="details-date-added"></span></p>
                    <p class="text-[#1a1a1a]"><strong>Duration:</strong> <span id="details-duration"></span> minutes</p>
                    <div class="mt-4">
                        <h4 class="font-semibold text-[#1a1a1a]">Assign Candidates</h4>
                        <div class="flex items-center mt-2">
                            <input type="text" id="candidate-id" class="p-2 border border-[#d1d5db] rounded flex-grow text-[#1a1a1a]" placeholder="Enter Candidate ID">
                            <button id="assign-candidate-btn" class="ml-2 bg-[#6b7280] text-[#1a1a1a] px-4 py-2 rounded-lg hover:bg-[#4b5563]">
                                Assign
                            </button>
                        </div>
                        <ul id="assigned-candidates" class="mt-2 list-disc pl-5 text-[#1a1a1a]"></ul>
                    </div>
                    <div class="mt-4">
                        <h4 class="font-semibold text-[#1a1a1a]">Questions</h4>
                        <div id="questions-list" class="mt-2"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Edit Question Modal -->
        <div id="edit-question-modal" class="modal">
            <div class="modal-content">
                <span class="close-btn">×</span>
                <h3 class="text-xl font-semibold mb-4 text-[#1a1a1a]">Edit Question</h3>
                <form id="edit-question-form">
                    <div class="mb-4">
                        <label for="edit-question-text" class="block text-sm font-medium text-[#1a1a1a]">Question</label>
                        <textarea id="edit-question-text" class="w-full p-2 border border-[#d1d5db] rounded text-[#1a1a1a]" required></textarea>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-[#1a1a1a]">Options</label>
                        <input type="text" id="edit-option-1" class="w-full p-2 border border-[#d1d5db] rounded mb-2 text-[#1a1a1a]" required>
                        <input type="text" id="edit-option-2" class="w-full p-2 border border-[#d1d5db] rounded mb-2 text-[#1a1a1a]" required>
                        <input type="text" id="edit-option-3" class="w-full p-2 border border-[#d1d5db] rounded mb-2 text-[#1a1a1a]" required>
                        <input type="text" id="edit-option-4" class="w-full p-2 border border-[#d1d5db] rounded mb-2 text-[#1a1a1a]" required>
                    </div>
                    <button type="submit" class="bg-[#6b7280] text-[#1a1a1a] px-4 py-2 rounded-lg hover:bg-[#4b5563]">
                        Save Question
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Sample test data with 15 tests (3 difficulty levels for 5 roles)
        let tests = [
            // Digital Marketing
            { id: 1, name: "Digital Marketing Basics", role: "Digital Marketing", dateAdded: "2025-05-20", duration: 30, candidates: [], questions: getSampleQuestions("Digital Marketing", "Beginner") },
            { id: 2, name: "Digital Marketing Intermediate", role: "Digital Marketing", dateAdded: "2025-05-19", duration: 45, candidates: [], questions: getSampleQuestions("Digital Marketing", "Intermediate") },
            { id: 3, name: "Digital Marketing Advanced", role: "Digital Marketing", dateAdded: "2025-05-18", duration: 60, candidates: [], questions: getSampleQuestions("Digital Marketing", "Advanced") },
            // SDE
            { id: 4, name: "SDE Basics", role: "SDE", dateAdded: "2025-05-20", duration: 30, candidates: [], questions: getSampleQuestions("SDE", "Beginner") },
            { id: 5, name: "SDE Intermediate", role: "SDE", dateAdded: "2025-05-19", duration: 45, candidates: [], questions: getSampleQuestions("SDE", "Intermediate") },
            { id: 6, name: "SDE Advanced", role: "SDE", dateAdded: "2025-05-18", duration: 60, candidates: [], questions: getSampleQuestions("SDE", "Advanced") },
            // Business Analyst
            { id: 7, name: "Business Analyst Basics", role: "Business Analyst", dateAdded: "2025-05-20", duration: 30, candidates: [], questions: getSampleQuestions("Business Analyst", "Beginner") },
            { id: 8, name: "Business Analyst Intermediate", role: "Business Analyst", dateAdded: "2025-05-19", duration: 45, candidates: [], questions: getSampleQuestions("Business Analyst", "Intermediate") },
            { id: 9, name: "Business Analyst Advanced", role: "Business Analyst", dateAdded: "2025-05-18", duration: 60, candidates: [], questions: getSampleQuestions("Business Analyst", "Advanced") },
            // Data Analyst
            { id: 10, name: "Data Analyst Basics", role: "Data Analyst", dateAdded: "2025-05-20", duration: 30, candidates: [], questions: getSampleQuestions("Data Analyst", "Beginner") },
            { id: 11, name: "Data Analyst Intermediate", role: "Data Analyst", dateAdded: "2025-05-19", duration: 45, candidates: [], questions: getSampleQuestions("Data Analyst", "Intermediate") },
            { id: 12, name: "Data Analyst Advanced", role: "Data Analyst", dateAdded: "2025-05-18", duration: 60, candidates: [], questions: getSampleQuestions("Data Analyst", "Advanced") },
            // Solution Engineer
            { id: 13, name: "Solution Engineer Basics", role: "Solution Engineer", dateAdded: "2025-05-20", duration: 30, candidates: [], questions: getSampleQuestions("Solution Engineer", "Beginner") },
            { id: 14, name: "Solution Engineer Intermediate", role: "Solution Engineer", dateAdded: "2025-05-19", duration: 45, candidates: [], questions: getSampleQuestions("Solution Engineer", "Intermediate") },
            { id: 15, name: "Solution Engineer Advanced", role: "Solution Engineer", dateAdded: "2025-05-18", duration: 60, candidates: [], questions: getSampleQuestions("Solution Engineer", "Advanced") }
        ];

        // Function to generate sample questions for each role and difficulty
        function getSampleQuestions(role, difficulty) {
            const baseQuestions = {
                "Digital Marketing": {
                    "Beginner": [
                        { id: 1, text: `What is SEO in ${role}?`, options: ["Search Engine Optimization", "Social Engagement Output", "Sales Enablement Option", "Systematic Email Outreach"], correct: 0 },
                        { id: 2, text: `What does PPC stand for in ${role}?`, options: ["Pay Per Click", "People Per Campaign", "Plan Per Conversion", "Post Per Content"], correct: 0 },
                        { id: 3, text: `What is a landing page?`, options: ["A blog post", "A product page", "A page designed for conversions", "A homepage"], correct: 2 },
                        { id: 4, text: `What is a CTA?`, options: ["Click To Action", "Call To Action", "Connect To Audience", "Create To Advertise"], correct: 1 },
                        { id: 5, text: `What is a keyword in ${role}?`, options: ["A type of ad", "A search term", "A social media post", "An email subject"], correct: 1 },
                        { id: 6, text: `What is A/B testing?`, options: ["Testing two versions of a campaign", "Testing ad budgets", "Testing audience segments", "Testing brand logos"], correct: 0 },
                        { id: 7, text: `What is a conversion rate?`, options: ["Percentage of visitors who take action", "Number of clicks", "Ad spend ratio", "Social media likes"], correct: 0 },
                        { id: 8, text: `What is content marketing?`, options: ["Selling products online", "Creating valuable content to attract customers", "Running paid ads", "Email campaigns only"], correct: 1 },
                        { id: 9, text: `What is a bounce rate?`, options: ["Visitors leaving after one page", "Email open rate", "Ad click rate", "Social media shares"], correct: 0 },
                        { id: 10, text: `What is a target audience?`, options: ["All website visitors", "Specific group for marketing", "Ad network users", "Email subscribers"], correct: 1 }
                    ],
                    "Intermediate": [
                        { id: 1, text: `What is the role of a meta description in ${role}?`, options: ["Improves SEO", "Increases ad spend", "Manages email lists", "Tracks conversions"], correct: 0 },
                        { id: 2, text: `What is retargeting?`, options: ["Targeting new customers", "Re-engaging past visitors", "Creating new ads", "Email marketing"], correct: 1 },
                        { id: 3, text: `What is a funnel in ${role}?`, options: ["A sales process", "A type of ad", "A social media platform", "A website layout"], correct: 0 },
                        { id: 4, text: `What is Google Analytics used for?`, options: ["Creating ads", "Tracking website performance", "Managing social media", "Email automation"], correct: 1 },
                        { id: 5, text: `What is a backlink?`, options: ["A link to your site from another", "A social media post", "An ad campaign", "An email link"], correct: 0 },
                        { id: 6, text: `What is CPM?`, options: ["Cost Per Mille", "Clicks Per Minute", "Conversions Per Month", "Cost Per Market"], correct: 0 },
                        { id: 7, text: `What is a heatmap?`, options: ["A visual of user interactions", "A type of ad", "A social media tool", "An email template"], correct: 0 },
                        { id: 8, text: `What is influencer marketing?`, options: ["Using celebrities for ads", "Partnering with influential people", "Creating viral content", "Running email campaigns"], correct: 1 },
                        { id: 9, text: `What is a lookalike audience?`, options: ["Similar to existing customers", "New website visitors", "Ad network users", "Social media followers"], correct: 0 },
                        { id: 10, text: `What is a drip campaign?`, options: ["A type of social media post", "A series of automated emails", "A paid ad strategy", "A website redesign"], correct: 1 }
                    ],
                    "Advanced": [
                        { id: 1, text: `What is schema markup in ${role}?`, options: ["Enhances SEO with structured data", "A type of ad", "A social media strategy", "An email template"], correct: 0 },
                        { id: 2, text: `What is attribution modeling?`, options: ["Assigning credit to marketing channels", "Creating ad content", "Managing social media", "Tracking email opens"], correct: 0 },
                        { id: 3, text: `What is a canonical URL?`, options: ["A preferred URL for duplicate content", "A type of ad", "A social media link", "An email link"], correct: 0 },
                        { id: 4, text: `What is a negative keyword?`, options: ["Excludes irrelevant search terms", "A type of ad", "A social media tag", "An email filter"], correct: 0 },
                        { id: 5, text: `What is programmatic advertising?`, options: ["Automated ad buying", "Manual ad creation", "Social media ads", "Email campaigns"], correct: 0 },
                        { id: 6, text: `What is a customer journey map?`, options: ["Visualizes customer interactions", "A type of ad", "A social media plan", "An email sequence"], correct: 0 },
                        { id: 7, text: `What is a SERP feature?`, options: ["Special elements in search results", "A type of ad", "A social media post", "An email campaign"], correct: 0 },
                        { id: 8, text: `What is omnichannel marketing?`, options: ["Integrated multi-channel strategy", "Single-channel ads", "Social media only", "Email only"], correct: 0 },
                        { id: 9, text: `What is a conversion pixel?`, options: ["Tracks conversions on websites", "A type of ad", "A social media tool", "An email tracker"], correct: 0 },
                        { id: 10, text: `What is a UTM parameter?`, options: ["Tracks campaign performance", "A type of ad", "A social media tag", "An email filter"], correct: 0 }
                    ]
                },
                "SDE": {
                    "Beginner": [
                        { id: 1, text: `What is a variable in ${role}?`, options: ["A function", "A data storage", "A loop", "A class"], correct: 1 },
                        { id: 2, text: `What is a loop?`, options: ["Repeats code", "Stores data", "Defines a class", "Calls a function"], correct: 0 },
                        { id: 3, text: `What is an array?`, options: ["A single variable", "A collection of items", "A function", "A class"], correct: 1 },
                        { id: 4, text: `What is a function?`, options: ["A reusable block of code", "A data type", "A loop", "A variable"], correct: 0 },
                        { id: 5, text: `What is debugging?`, options: ["Writing code", "Fixing errors", "Compiling code", "Testing code"], correct: 1 },
                        { id: 6, text: `What is a string?`, options: ["A number", "A sequence of characters", "A loop", "A function"], correct: 1 },
                        { id: 7, text: `What is a boolean?`, options: ["True/False value", "A number", "A string", "A function"], correct: 0 },
                        { id: 8, text: `What is version control?`, options: ["Manages code changes", "Compiles code", "Tests code", "Deploys code"], correct: 0 },
                        { id: 9, text: `What is an IDE?`, options: ["Integrated Development Environment", "Internet Data Exchange", "Internal Development Engine", "Integrated Data Environment"], correct: 0 },
                        { id: 10, text: `What is a comment?`, options: ["Executable code", "Non-executable explanation", "A function", "A variable"], correct: 1 }
                    ],
                    "Intermediate": [
                        { id: 1, text: `What is recursion in ${role}?`, options: ["A function calling itself", "A loop", "A class", "A variable"], correct: 0 },
                        { id: 2, text: `What is a pointer?`, options: ["Stores memory address", "A data type", "A function", "A loop"], correct: 0 },
                        { id: 3, text: `What is object-oriented programming?`, options: ["Uses classes and objects", "Uses loops", "Uses arrays", "Uses functions only"], correct: 0 },
                        { id: 4, text: `What is a hash table?`, options: ["Stores key-value pairs", "A loop", "A class", "A function"], correct: 0 },
                        { id: 5, text: `What is a binary search?`, options: ["Searches sorted data", "Searches unsorted data", "Sorts data", "Stores data"], correct: 0 },
                        { id: 6, text: `What is a linked list?`, options: ["A sequence of nodes", "A function", "A class", "A variable"], correct: 0 },
                        { id: 7, text: `What is an API?`, options: ["Application Programming Interface", "Automated Program Input", "Application Process Integration", "Automated Programming Interface"], correct: 0 },
                        { id: 8, text: `What is a stack?`, options: ["LIFO data structure", "FIFO data structure", "A function", "A class"], correct: 0 },
                        { id: 9, text: `What is a queue?`, options: ["FIFO data structure", "LIFO data structure", "A function", "A class"], correct: 0 },
                        { id: 10, text: `What is a database?`, options: ["Stores organized data", "A function", "A loop", "A variable"], correct: 0 }
                    ],
                    "Advanced": [
                        { id: 1, text: `What is a design pattern in ${role}?`, options: ["Reusable solution to common problems", "A data structure", "A function", "A loop"], correct: 0 },
                        { id: 2, text: `What is multithreading?`, options: ["Running multiple threads", "Running single thread", "A data structure", "A function"], correct: 0 },
                        { id: 3, text: `What is a microservice?`, options: ["Small, independent service", "A large application", "A data structure", "A function"], correct: 0 },
                        { id: 4, text: `What is a deadlock?`, options: ["Threads waiting indefinitely", "A fast thread", "A data structure", "A function"], correct: 0 },
                        { id: 5, text: `What is a REST API?`, options: ["Uses HTTP methods", "A data structure", "A loop", "A class"], correct: 0 },
                        { id: 6, text: `What is a graph?`, options: ["Nodes and edges", "A function", "A loop", "A variable"], correct: 0 },
                        { id: 7, text: `What is a binary tree?`, options: ["Tree with two children per node", "A linear list", "A function", "A class"], correct: 0 },
                        { id: 8, text: `What is dynamic programming?`, options: ["Solves problems by breaking them down", "A data structure", "A loop", "A function"], correct: 0 },
                        { id: 9, text: `What is a mutex?`, options: ["Mutual exclusion lock", "A data structure", "A function", "A loop"], correct: 0 },
                        { id: 10, text: `What is a load balancer?`, options: ["Distributes network traffic", "A data structure", "A function", "A loop"], correct: 0 }
                    ]
                },
                "Business Analyst": {
                    "Beginner": [
                        { id: 1, text: `What is a requirement in ${role}?`, options: ["A stakeholder need", "A data model", "A test case", "A report"], correct: 0 },
                        { id: 2, text: `What is a use case?`, options: ["Describes system interactions", "A data table", "A report", "A test"], correct: 0 },
                        { id: 3, text: `What is a stakeholder?`, options: ["Person with interest in project", "A developer", "A database", "A report"], correct: 0 },
                        { id: 4, text: `What is a flowchart?`, options: ["Visualizes processes", "A database", "A report", "A test"], correct: 0 },
                        { id: 5, text: `What is SWOT analysis?`, options: ["Strengths, Weaknesses, Opportunities, Threats", "A data model", "A test", "A report"], correct: 0 },
                        { id: 6, text: `What is a business process?`, options: ["Set of activities to achieve a goal", "A database", "A report", "A test"], correct: 0 },
                        { id: 7, text: `What is a KPI?`, options: ["Key Performance Indicator", "Key Process Input", "Key Project Index", "Key Plan Indicator"], correct: 0 },
                        { id: 8, text: `What is a gap analysis?`, options: ["Compares current vs desired state", "A data model", "A test", "A report"], correct: 0 },
                        { id: 9, text: `What is a BRD?`, options: ["Business Requirements Document", "Business Report Data", "Business Review Document", "Business Requirement Data"], correct: 0 },
                        { id: 10, text: `What is elicitation?`, options: ["Gathering requirements", "Creating reports", "Testing systems", "Modeling data"], correct: 0 }
                    ],
                    "Intermediate": [
                        { id: 1, text: `What is a process model in ${role}?`, options: ["Visual representation of processes", "A data table", "A report", "A test"], correct: 0 },
                        { id: 2, text: `What is a user story?`, options: ["Describes feature from user perspective", "A data model", "A test case", "A report"], correct: 0 },
                        { id: 3, text: `What is a data flow diagram?`, options: ["Shows data movement", "A report", "A test", "A database"], correct: 0 },
                        { id: 4, text: `What is a stakeholder matrix?`, options: ["Maps stakeholder influence", "A data model", "A report", "A test"], correct: 0 },
                        { id: 5, text: `What is a use case diagram?`, options: ["Shows system interactions", "A data table", "A report", "A test"], correct: 0 },
                        { id: 6, text: `What is a RACI chart?`, options: ["Responsible, Accountable, Consulted, Informed", "A data model", "A report", "A test"], correct: 0 },
                        { id: 7, text: `What is a feasibility study?`, options: ["Assesses project viability", "A data model", "A report", "A test"], correct: 0 },
                        { id: 8, text: `What is a traceability matrix?`, options: ["Links requirements to deliverables", "A data table", "A report", "A test"], correct: 0 },
                        { id: 9, text: `What is a wireframe?`, options: ["UI layout sketch", "A data model", "A report", "A test"], correct: 0 },
                        { id: 10, text: `What is change management?`, options: ["Manages project changes", "A data model", "A report", "A test"], correct: 0 }
                    ],
                    "Advanced": [
                        { id: 1, text: `What is enterprise analysis in ${role}?`, options: ["Strategic business needs assessment", "A data model", "A report", "A test"], correct: 0 },
                        { id: 2, text: `What is a decision tree?`, options: ["Visualizes decision options", "A data table", "A report", "A test"], correct: 0 },
                        { id: 3, text: `What is a business case?`, options: ["Justifies project investment", "A data model", "A report", "A test"], correct: 0 },
                        { id: 4, text: `What is a value stream map?`, options: ["Shows process value flow", "A data table", "A report", "A test"], correct: 0 },
                        { id: 5, text: `What is a risk register?`, options: ["Tracks project risks", "A data model", "A report", "A test"], correct: 0 },
                        { id: 6, text: `What is a cost-benefit analysis?`, options: ["Compares costs and benefits", "A data table", "A report", "A test"], correct: 0 },
                        { id: 7, text: `What is a business rule?`, options: ["Defines operational constraints", "A data model", "A report", "A test"], correct: 0 },
                        { id: 8, text: `What is a data dictionary?`, options: ["Defines data elements", "A data table", "A report", "A test"], correct: 0 },
                        { id: 9, text: `What is a BPMN diagram?`, options: ["Business Process Model and Notation", "A data model", "A report", "A test"], correct: 0 },
                        { id: 10, text: `What is a stakeholder engagement plan?`, options: ["Manages stakeholder interactions", "A data model", "A report", "A test"], correct: 0 }
                    ]
                },
                "Data Analyst": {
                    "Beginner": [
                        { id: 1, text: `What is data cleaning in ${role}?`, options: ["Removing errors from data", "Creating reports", "Writing code", "Testing data"], correct: 0 },
                        { id: 2, text: `What is a dataset?`, options: ["Collection of data", "A function", "A report", "A test"], correct: 0 },
                        { id: 3, text: `What is a mean?`, options: ["Average of data", "A data type", "A function", "A test"], correct: 0 },
                        { id: 4, text: `What is a median?`, options: ["Middle value of data", "A data type", "A function", "A test"], correct: 0 },
                        { id: 5, text: `What is a histogram?`, options: ["Shows data distribution", "A data type", "A function", "A test"], correct: 0 },
                        { id: 6, text: `What is SQL?`, options: ["Structured Query Language", "A data type", "A function", "A test"], correct: 0 },
                        { id: 7, text: `What is a spreadsheet?`, options: ["Tool for data organization", "A data type", "A function", "A test"], correct: 0 },
                        { id: 8, text: `What is a pivot table?`, options: ["Summarizes data", "A data type", "A function", "A test"], correct: 0 },
                        { id: 9, text: `What is a bar chart?`, options: ["Compares categories", "A data type", "A function", "A test"], correct: 0 },
                        { id: 10, text: `What is data visualization?`, options: ["Graphical representation of data", "A data type", "A function", "A test"], correct: 0 }
                    ],
                    "Intermediate": [
                        { id: 1, text: `What is a regression analysis in ${role}?`, options: ["Predicts relationships", "A data type", "A function", "A test"], correct: 0 },
                        { id: 2, text: `What is a join in SQL?`, options: ["Combines tables", "A data type", "A function", "A test"], correct: 0 },
                        { id: 3, text: `What is a correlation?`, options: ["Measures variable relationships", "A data type", "A function", "A test"], correct: 0 },
                        { id: 4, text: `What is a data warehouse?`, options: ["Stores large datasets", "A data type", "A function", "A test"], correct: 0 },
                        { id: 5, text: `What is a box plot?`, options: ["Shows data distribution", "A data type", "A function", "A test"], correct: 0 },
                        { id: 6, text: `What is a time series?`, options: ["Data over time", "A data type", "A function", "A test"], correct: 0 },
                        { id: 7, text: `What is a data model?`, options: ["Defines data structure", "A data type", "A function", "A test"], correct: 0 },
                        { id: 8, text: `What is a scatter plot?`, options: ["Shows data points", "A data type", "A function", "A test"], correct: 0 },
                        { id: 9, text: `What is a query?`, options: ["Retrieves data", "A data type", "A function", "A test"], correct: 0 },
                        { id: 10, text: `What is data normalization?`, options: ["Organizes data efficiently", "A data type", "A function", "A test"], correct: 0 }
                    ],
                    "Advanced": [
                        { id: 1, text: `What is machine learning in ${role}?`, options: ["Algorithms for predictions", "A data type", "A function", "A test"], correct: 0 },
                        { id: 2, text: `What is a decision tree in ${role}?`, options: ["Predicts outcomes", "A data type", "A function", "A test"], correct: 0 },
                        { id: 3, text: `What is a clustering algorithm?`, options: ["Groups similar data", "A data type", "A function", "A test"], correct: 0 },
                        { id: 4, text: `What is a data pipeline?`, options: ["Automates data flow", "A data type", "A function", "A test"], correct: 0 },
                        { id: 5, text: `What is a neural network?`, options: ["Mimics human brain for predictions", "A data type", "A function", "A test"], correct: 0 },
                        { id: 6, text: `What is a confidence interval?`, options: ["Range of likely values", "A data type", "A function", "A test"], correct: 0 },
                        { id: 7, text: `What is a hypothesis test?`, options: ["Tests statistical assumptions", "A data type", "A function", "A test"], correct: 0 },
                        { id: 8, text: `What is a data lake?`, options: ["Stores raw data", "A data type", "A function", "A test"], correct: 0 },
                        { id: 9, text: `What is a feature selection?`, options: ["Chooses relevant variables", "A data type", "A function", "A test"], correct: 0 },
                        { id: 10, text: `What is a Bayesian model?`, options: ["Uses probability for predictions", "A data type", "A function", "A test"], correct: 0 }
                    ]
                },
                "Solution Engineer": {
                    "Beginner": [
                        { id: 1, text: `What is a solution architecture in ${role}?`, options: ["Designs system solutions", "A data model", "A report", "A test"], correct: 0 },
                        { id: 2, text: `What is a technical requirement?`, options: ["System specifications", "A data model", "A report", "A test"], correct: 0 },
                        { id: 3, text: `What is a prototype?`, options: ["Early model of a solution", "A data model", "A report", "A test"], correct: 0 },
                        { id: 4, text: `What is a client demo?`, options: ["Shows solution to client", "A data model", "A report", "A test"], correct: 0 },
                        { id: 5, text: `What is a technical specification?`, options: ["Details system requirements", "A data model", "A report", "A test"], correct: 0 },
                        { id: 6, text: `What is a proof of concept?`, options: ["Tests solution feasibility", "A data model", "A report", "A test"], correct: 0 },
                        { id: 7, text: `What is a workflow?`, options: ["Sequence of tasks", "A data model", "A report", "A test"], correct: 0 },
                        { id: 8, text: `What is a stakeholder meeting?`, options: ["Discusses project needs", "A data model", "A report", "A test"], correct: 0 },
                        { id: 9, text: `What is a system integration?`, options: ["Connects different systems", "A data model", "A report", "A test"], correct: 0 },
                        { id: 10, text: `What is a use case?`, options: ["Describes system usage", "A data model", "A report", "A test"], correct: 0 }
                    ],
                    "Intermediate": [
                        { id: 1, text: `What is scalability in ${role}?`, options: ["Ability to handle growth", "A data model", "A report", "A test"], correct: 0 },
                        { id: 2, text: `What is a cloud solution?`, options: ["Hosted on cloud infrastructure", "A data model", "A report", "A test"], correct: 0 },
                        { id: 3, text: `What is a technical debt?`, options: ["Cost of quick fixes", "A data model", "A report", "A test"], correct: 0 },
                        { id: 4, text: `What is an API integration?`, options: ["Connects systems via APIs", "A data model", "A report", "A test"], correct: 0 },
                        { id: 5, text: `What is a load test?`, options: ["Tests system under load", "A data model", "A report", "A test"], correct: 0 },
                        { id: 6, text: `What is a deployment plan?`, options: ["Outlines system rollout", "A data model", "A report", "A test"], correct: 0 },
                        { id: 7, text: `What is a failover mechanism?`, options: ["Handles system failures", "A data model", "A report", "A test"], correct: 0 },
                        { id: 8, text: `What is a service level agreement?`, options: ["Defines service expectations", "A data model", "A report", "A test"], correct: 0 },
                        { id: 9, text: `What is a system architecture diagram?`, options: ["Shows system components", "A data model", "A report", "A test"], correct: 0 },
                        { id: 10, text: `What is a technical proposal?`, options: ["Outlines solution for client", "A data model", "A report", "A test"], correct: 0 }
                    ],
                    "Advanced": [
                        { id: 1, text: `What is high availability in ${role}?`, options: ["Minimizes downtime", "A data model", "A report", "A test"], correct: 0 },
                        { id: 2, text: `What is a distributed system?`, options: ["Multiple interconnected systems", "A data model", "A report", "A test"], correct: 0 },
                        { id: 3, text: `What is a microservices architecture?`, options: ["Small, independent services", "A data model", "A report", "A test"], correct: 0 },
                        { id: 4, text: `What is a disaster recovery plan?`, options: ["Restores systems after failure", "A data model", "A report", "A test"], correct: 0 },
                        { id: 5, text: `What is a performance benchmark?`, options: ["Measures system performance", "A data model", "A report", "A test"], correct: 0 },
                        { id: 6, text: `What is a security audit?`, options: ["Evaluates system security", "A data model", "A report", "A test"], correct: 0 },
                        { id: 7, text: `What is a technical roadmap?`, options: ["Plans technology development", "A data model", "A report", "A test"], correct: 0 },
                        { id: 8, text: `What is a containerization?`, options: ["Packages apps with dependencies", "A data model", "A report", "A test"], correct: 0 },
                        { id: 9, text: `What is a load balancer?`, options: ["Distributes network traffic", "A data model", "A report", "A test"], correct: 0 },
                        { id: 10, text: `What is a DevOps pipeline?`, options: ["Automates development to deployment", "A data model", "A report", "A test"], correct: 0 }
                    ]
                }
            };
            return baseQuestions[role][difficulty];
        }

        // Filter state
        let filters = {
            startDate: null,
            endDate: null,
            roles: []
        };

        // Load tests into the table based on filters
        function loadTests() {
            const tableBody = document.getElementById('tests-table-body');
            tableBody.innerHTML = '';

            const filteredTests = tests.filter(test => {
                // Date filter
                let passesDateFilter = true;
                const testDate = new Date(test.dateAdded);
                if (filters.startDate) {
                    const startDate = new Date(filters.startDate);
                    passesDateFilter = passesDateFilter && testDate >= startDate;
                }
                if (filters.endDate) {
                    const endDate = new Date(filters.endDate);
                    passesDateFilter = passesDateFilter && testDate <= endDate;
                }

                // Role filter
                let passesRoleFilter = true;
                if (filters.roles.length > 0) {
                    passesRoleFilter = filters.roles.includes(test.role);
                }

                // Combine filters (all must pass)
                return passesDateFilter && passesRoleFilter;
            });

            filteredTests.forEach(test => {
                const row = document.createElement('tr');
                row.className = 'border-b border-[#d1d5db]';
                row.innerHTML = `
                    <td class="p-3 text-[#1a1a1a]">${test.name}</td>
                    <td class="p-3 text-[#1a1a1a]">${test.role}</td>
                    <td class="p-3 text-[#1a1a1a]">${test.dateAdded}</td>
                    <td class="p-3">
                        <button class="view-details-btn text-[#6b7280] hover:underline hover:text-[#4b5563] mr-2" data-id="${test.id}">View Details</button>
                        <button class="delete-test-btn text-[#4b5563] hover:underline hover:text-[#374151]" data-id="${test.id}">Delete</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });

            // Add event listeners for view details and delete buttons
            document.querySelectorAll('.view-details-btn').forEach(btn => {
                btn.addEventListener('click', () => showTestDetails(btn.dataset.id));
            });
            document.querySelectorAll('.delete-test-btn').forEach(btn => {
                btn.addEventListener('click', () => deleteTest(btn.dataset.id));
            });
        }

        // Show Add Test Modal
        const addTestBtn = document.getElementById('add-test-btn');
        const addTestModal = document.getElementById('add-test-modal');
        const addTestForm = document.getElementById('add-test-form');
        addTestBtn.addEventListener('click', () => {
            addTestModal.style.display = 'block';
        });

        // Close Modals
        document.querySelectorAll('.close-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                btn.closest('.modal').style.display = 'none';
            });
        });

        // Add Test Form Submission
        addTestForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const testName = document.getElementById('test-name').value;
            const testRole = document.getElementById('test-role').value;
            const testDuration = document.getElementById('test-duration').value;
            const newTest = {
                id: tests.length + 1,
                name: testName,
                role: testRole,
                dateAdded: new Date().toISOString().split('T')[0],
                duration: parseInt(testDuration),
                candidates: [],
                questions: getSampleQuestions(testRole, "Beginner") // Default to beginner questions
            };
            tests.push(newTest);
            loadTests();
            addTestModal.style.display = 'none';
            addTestForm.reset();
        });

        // Show Test Details Modal
        const testDetailsModal = document.getElementById('test-details-modal');
        const editQuestionModal = document.getElementById('edit-question-modal');
        const editQuestionForm = document.getElementById('edit-question-form');
        function showTestDetails(testId) {
            const test = tests.find(t => t.id == testId);
            if (!test) return;

            document.getElementById('details-test-name').textContent = test.name;
            document.getElementById('details-role').textContent = test.role;
            document.getElementById('details-date-added').textContent = test.dateAdded;
            document.getElementById('details-duration').textContent = test.duration;

            // Load assigned candidates
            const assignedCandidatesList = document.getElementById('assigned-candidates');
            assignedCandidatesList.innerHTML = test.candidates.length
                ? test.candidates.map(id => `<li>${id}</li>`).join('')
                : '<li>No candidates assigned yet.</li>';

            // Load questions
            const questionsList = document.getElementById('questions-list');
            questionsList.innerHTML = test.questions.length
                ? test.questions.map((q, index) => `
                    <div class="question-item">
                        <p class="text-[#1a1a1a]"><strong>Question ${index + 1}:</strong> ${q.text}</p>
                        <ol class="list-decimal pl-5 text-[#1a1a1a]">
                            ${q.options.map((opt, i) => `<li${i === q.correct ? ' class="font-bold"' : ''}>${opt}</li>`).join('')}
                        </ol>
                        <div class="mt-2">
                            <button class="edit-question-btn text-[#6b7280] hover:underline hover:text-[#4b5563] mr-2" data-test-id="${test.id}" data-question-id="${q.id}">Edit</button>
                            <button class="delete-question-btn text-[#4b5563] hover:underline hover:text-[#374151]" data-test-id="${test.id}" data-question-id="${q.id}">Delete</button>
                        </div>
                    </div>
                `).join('')
                : '<p class="text-[#1a1a1a]">No questions assigned yet.</p>';

            testDetailsModal.style.display = 'block';

            // Assign Candidate Button
            const assignCandidateBtn = document.getElementById('assign-candidate-btn');
            assignCandidateBtn.onclick = () => {
                const candidateId = document.getElementById('candidate-id').value.trim();
                if (candidateId && !test.candidates.includes(candidateId)) {
                    test.candidates.push(candidateId);
                    assignedCandidatesList.innerHTML = test.candidates.length
                        ? test.candidates.map(id => `<li>${id}</li>`).join('')
                        : '<li>No candidates assigned yet.</li>';
                    document.getElementById('candidate-id').value = '';
                }
            };

            // Add event listeners for edit and delete question buttons
            document.querySelectorAll('.edit-question-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const testId = btn.dataset.testId;
                    const questionId = btn.dataset.questionId;
                    showEditQuestionModal(testId, questionId);
                });
            });
            document.querySelectorAll('.delete-question-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const testId = btn.dataset.testId;
                    const questionId = btn.dataset.questionId;
                    deleteQuestion(testId, questionId);
                });
            });
        }

        // Show Edit Question Modal
        function showEditQuestionModal(testId, questionId) {
            const test = tests.find(t => t.id == testId);
            const question = test.questions.find(q => q.id == questionId);
            if (!question) return;

            document.getElementById('edit-question-text').value = question.text;
            document.getElementById('edit-option-1').value = question.options[0];
            document.getElementById('edit-option-2').value = question.options[1];
            document.getElementById('edit-option-3').value = question.options[2];
            document.getElementById('edit-option-4').value = question.options[3];

            editQuestionModal.style.display = 'block';

            // Handle Edit Question Form Submission
            editQuestionForm.onsubmit = (e) => {
                e.preventDefault();
                question.text = document.getElementById('edit-question-text').value;
                question.options = [
                    document.getElementById('edit-option-1').value,
                    document.getElementById('edit-option-2').value,
                    document.getElementById('edit-option-3').value,
                    document.getElementById('edit-option-4').value
                ];
                // Note: Keeping the correct answer index unchanged for simplicity
                editQuestionModal.style.display = 'none';
                editQuestionForm.reset();
                showTestDetails(testId); // Refresh test details
            };
        }

        // Delete Question
        function deleteQuestion(testId, questionId) {
            if (confirm('Are you sure you want to delete this question?')) {
                const test = tests.find(t => t.id == testId);
                test.questions = test.questions.filter(q => q.id != questionId);
                showTestDetails(testId); // Refresh test details
            }
        }

        // Delete Test
        function deleteTest(testId) {
            if (confirm('Are you sure you want to delete this test?')) {
                tests = tests.filter(t => t.id != testId);
                loadTests();
            }
        }

        // Filter Handling
        const startDateInput = document.getElementById('start-date');
        const endDateInput = document.getElementById('end-date');
        const roleSelect = document.getElementById('role-select');
        const roleOptions = document.getElementById('role-options');
        const clearFiltersBtn = document.getElementById('clear-filters');

        // Date Filter
        startDateInput.addEventListener('change', () => {
            filters.startDate = startDateInput.value;
            loadTests();
        });
        endDateInput.addEventListener('change', () => {
            filters.endDate = endDateInput.value;
            loadTests();
        });

        // Role Filter (Multi-select)
        roleSelect.addEventListener('click', () => {
            roleOptions.style.display = roleOptions.style.display === 'block' ? 'none' : 'block';
        });

        roleOptions.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                filters.roles = Array.from(roleOptions.querySelectorAll('input[type="checkbox"]:checked'))
                    .map(cb => cb.value);
                roleSelect.textContent = filters.roles.length > 0 ? filters.roles.join(', ') : 'Select Roles';
                loadTests();
            });
        });

        // Close role options when clicking outside
        document.addEventListener('click', (e) => {
            if (!roleSelect.contains(e.target) && !roleOptions.contains(e.target)) {
                roleOptions.style.display = 'none';
            }
        });

        // Clear Filters
        clearFiltersBtn.addEventListener('click', () => {
            filters = { startDate: null, endDate: null, roles: [] };
            startDateInput.value = '';
            endDateInput.value = '';
            roleSelect.textContent = 'Select Roles';
            roleOptions.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            loadTests();
        });

        // Initial Load
        loadTests();
    </script>
</body>
</html>
